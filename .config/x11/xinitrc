#!/bin/sh

# load the X resource file
[ -r "${XDG_CONFIG_HOME:-$HOME/.config}/x11/Xresources" ] && exec xrdb ${XDG_CONFIG_HOME:-$HOME/.config}/x11/Xresources &

# wallpaper & compositor
exec picom -b --config "${XDG_CONFIG_HOME:-$HOME/.config}/picom/picom.conf" &
exec hsetroot -fill ${XDG_DATA_HOME:-$HOME/.local/share}/bg &

# run dwm commands
[ "$WM_USE" = "dwm" ] && {
    exec dwmblocks &
    exec dbus-launch --exit-with-session dwm
    exit
}

# invalid wm_use at this point
[ -n "$WM_USE" ] && {
    printf "\n${0##*/}: error: No startup rule for $WM_USE\n\n"
} || {
    printf "\n${0##*/}: error: No WM_USE specified\n\n"
}
